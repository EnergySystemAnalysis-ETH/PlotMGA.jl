<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · PlotMGA</title><meta name="title" content="Manual · PlotMGA"/><meta property="og:title" content="Manual · PlotMGA"/><meta property="twitter:title" content="Manual · PlotMGA"/><meta name="description" content="Documentation for PlotMGA."/><meta property="og:description" content="Documentation for PlotMGA."/><meta property="twitter:description" content="Documentation for PlotMGA."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PlotMGA</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../api/">API</a></li><li class="is-active"><a class="tocitem" href>Manual</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Input-data"><span>Input data</span></a></li><li><a class="tocitem" href="#Comparing-MGA-algorithms"><span>Comparing MGA algorithms</span></a></li><li><a class="tocitem" href="#Obtaining-values-to-plot"><span>Obtaining values to plot</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Manual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Manual</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergySystemAnalysis-ETH/PlotMGA.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergySystemAnalysis-ETH/PlotMGA.jl/blob/main/docs/src/manual.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Manual"><a class="docs-heading-anchor" href="#Manual">Manual</a><a id="Manual-1"></a><a class="docs-heading-anchor-permalink" href="#Manual" title="Permalink"></a></h1><p>This page serves as a guide for running and customizing PlotMGA.jl. For a ready-made example see <code>example/</code>.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>PlotMGA.jl comes as a Julia Package, and can be installed using standard Pkg:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(url=&quot;https://github.com/EnergySystemAnalysis-ETH/PlotMGA.jl&quot;)</code></pre><h2 id="Input-data"><a class="docs-heading-anchor" href="#Input-data">Input data</a><a id="Input-data-1"></a><a class="docs-heading-anchor-permalink" href="#Input-data" title="Permalink"></a></h2><p>PlotMGA.jl expects a database with result outputs produced by a SpineOpt&#39;s MGA run. It is preferrable if the Spine inputs were produced by the MORPHE2US pipeline.</p><h2 id="Comparing-MGA-algorithms"><a class="docs-heading-anchor" href="#Comparing-MGA-algorithms">Comparing MGA algorithms</a><a id="Comparing-MGA-algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Comparing-MGA-algorithms" title="Permalink"></a></h2><p>PlotMGA.jl has an inbuilt functionality for comparing different MGA algorithms/parameters with plots. Simply store multiple algorithms&#39; results in a single database, but with a different <code>Alternative</code> value (e.g., name of the algorithm).</p><h2 id="Obtaining-values-to-plot"><a class="docs-heading-anchor" href="#Obtaining-values-to-plot">Obtaining values to plot</a><a id="Obtaining-values-to-plot-1"></a><a class="docs-heading-anchor-permalink" href="#Obtaining-values-to-plot" title="Permalink"></a></h2><p>We have to first select the values that we want to plot, e.g., the technological installations and energy flows.</p><h3 id="Processing-our-results-(Optional)"><a class="docs-heading-anchor" href="#Processing-our-results-(Optional)">Processing our results (Optional)</a><a id="Processing-our-results-(Optional)-1"></a><a class="docs-heading-anchor-permalink" href="#Processing-our-results-(Optional)" title="Permalink"></a></h3><p>You might skip this paragraph if you are only interested in the SpineOpt&#39;s parameters from this list:</p><ul><li>units installed</li><li>unit flows</li><li>total costs</li><li>storages_invested</li></ul><p>As SpineOpt&#39;s offers a great deal of flexibility for modeling, we might run into many different formats for our data. To solve this issue we give the user the option to model their preprocessing pipeline ad-hoc, with the help of DataFrames. The SpineDB keeps the data (after joining) in a format:</p><ul><li>entity.name - entry details delimited with &quot;__&quot;</li><li>alternative</li><li>value (BSON encoded timeseries)</li></ul><p>We process those parameters and obtain a DataFrame with columns: </p><ul><li>details - list</li><li>alternative</li><li>value - timeseries dict</li></ul><p>In order to setup processing of some new parameter type, simply use:</p><pre><code class="language-julia hljs">function process_fn1(df)
    ...
    df
end
process_spine_data(::Val{:new_type}) = process_fn1</code></pre><h3 id="Getting-the-data"><a class="docs-heading-anchor" href="#Getting-the-data">Getting the data</a><a id="Getting-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-the-data" title="Permalink"></a></h3><p>To obtain the data DataFrames, we can use the  <code>get_spine_parameter</code> function:</p><pre><code class="language-julia hljs">db = # Open DB handler
df1 = get_spine_parameter(db, :param_type) 
df2 = get_spine_parameter(db, :param_type2, [col1, col2]) # leaves only the specified columns and sorts on them</code></pre><p>Examples:</p><pre><code class="language-julia hljs">unit_flows = get_spine_parameter(db, :unit_flow, 
    [:mga_iteration, :alternative, :technology, :installation, :destination, :total_value])</code></pre><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><h3 id="Plotting-Profiles"><a class="docs-heading-anchor" href="#Plotting-Profiles">Plotting Profiles</a><a id="Plotting-Profiles-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-Profiles" title="Permalink"></a></h3><p>We can plot how the commodity flow profiles change in every MGA iteration. However, there are many profiles we might be interested in. In PlotMGA, we group the profiles, e.g., according to the commodity of the flow.  The group can be defined as:</p><pre><code class="language-julia hljs">group1 = [
    ProfileType(profile_name_1, df_filter_predicate_1),
    ProfileType(profile_name_2, df_filter_predicate_2),
    ...
]</code></pre><p>If we define many groups, the plotting will be done over all of the possible combinations of group entries.</p><p>Then we run:</p><pre><code class="language-julia hljs">plot_all_mga_profiles(
    energy_flows_df, energy_unit, group1, group2, ...,
    fig_prefix=&quot;mga_profiles_&quot;
)</code></pre><p>Example:</p><pre><code class="language-julia hljs">unit_flows = get_spine_parameter(db, :unit_flow, 
    [:mga_iteration, :alternative, :technology, :installation, :destination, :total_value])
commodity_types = [
    ProfileType(&quot;Electricity&quot;, :destination=&gt;ByRow(contains(&quot;Electricity&quot;))),
    ProfileType(&quot;Heat&quot;, :destination=&gt;ByRow(contains(&quot;Space_Heating&quot;)))
]
plot_all_mga_profiles(
    unit_flows, PlotMGA.GWh, commodity_types,
    fig_prefix=&quot;mga_profiles_&quot;
)</code></pre><h3 id="Plotting-Technology-Effects"><a class="docs-heading-anchor" href="#Plotting-Technology-Effects">Plotting Technology Effects</a><a id="Plotting-Technology-Effects-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-Technology-Effects" title="Permalink"></a></h3><p>We might be interest how our technology in MGA&#39;s iteration affect some total system parameters, e.g. CO2 production, costs:</p><pre><code class="language-julia hljs">plot_technology_effects(technology_df, effects_df, fig_prefix=&quot;effects_&quot;)</code></pre><p>Example:</p><pre><code class="language-julia hljs">total_costs = get_spine_parameter(db, :total_costs, 
    [:mga_iteration, :alternative, :total_value])
units_invested = get_spine_parameter(db, :units_invested, 
    [:mga_iteration, :alternative, :technology, :installation, :total_value])
plot_technology_effects(
    units_invested, total_costs, 
    fig_prefix=&quot;technology_effects_on_cost_&quot;
)</code></pre><h3 id="Plotting-Technology-Interactions"><a class="docs-heading-anchor" href="#Plotting-Technology-Interactions">Plotting Technology Interactions</a><a id="Plotting-Technology-Interactions-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-Technology-Interactions" title="Permalink"></a></h3><p>We can plot how the capacity of installed technology reacts with different technological installations, and thus on total system&#39;s parameters.</p><p>As the plotting is done over every alternative in database (e.g., used algorithm) we have to define markers to differentiate between them. We have to also define the marker for the optimal solution:</p><pre><code class="language-julia hljs">markers = Dict(
    &quot;alg1&quot; =&gt; :x,
    &quot;alg2&quot; =&gt; :rect,
    &quot;Optimal&quot; =&gt; :diamond
)</code></pre><p>Then we can run:</p><pre><code class="language-julia hljs">plot_technology_interactions(
    technology_df, effects, markers, 
    fig_prefix=&quot;technology_interactions_&quot;
)</code></pre><p>Example</p><pre><code class="language-julia hljs">total_costs = get_spine_parameter(db, :total_costs, 
    [:mga_iteration, :alternative, :total_value])
units_invested = get_spine_parameter(db, :units_invested, 
    [:mga_iteration, :alternative, :technology, :installation, :total_value])
markers = #define markers
plot_technology_interactions(
    units_invested, total_costs, markers, 
    fig_prefix=&quot;technology_interactions_&quot;, display_plot=false
)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../api/">« API</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Monday 1 September 2025 13:39">Monday 1 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
